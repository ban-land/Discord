<!DOCTYPE html>
<html>
<head>
<title>NSFW Channel Warning</title>
<style>
body {
  font-family: sans-serif;
  background-color: #2f3;
  color: #dcddde;
  height: 100vh;
  margin: 0;
}

.warning-container {
  padding: 40px;
  border-radius: 8px;
  text-align: center;
  height: 100vh;
  background-color: #2f3136;
}

.warning-icon {
  width: 150px;
  height: 150px;
  margin: 20vh auto 20px;
}

.warning-icon img {
  width: 100%;
  height: 100%;
}

h2 {
  font-size: 24px;
  color: #fff;
}

p {
  font-size: 16px;
  color: #b9bbbe;
}

.button-container {
  margin-top: 30px;
  display: flex;
  justify-content: center;
}

.button-container button {
  padding: 15px 30px;
  border: none;
  border-radius: 4px;
  font-size: 18px;
  cursor: pointer;
  margin: 0 10px;
  width: 180px;
}

.button-container button.nope {
  background-color: #4f545c;
  color: #fff;
}

.button-container button.continue {
  background-color: #d32f2f;
  color: #fff;
}
</style>
</head>
<body>

<div class="warning-container">
  <div class="warning-icon">
    <img src="https://raw.githubusercontent.com/ban-land/Backups/refs/heads/main/icon/NSFW.svg" alt="NSFW Icon">
  </div>
  <h2>NSFW Channel</h2>
  <p>This channel is unmonitored and may contain sensitive content. Do you wish to proceed?</p>
  <div class="button-container">
    <button class="nope" onclick="location.href='https://ban-land.github.io/Discord/'">Nope</button>
    <button class="continue" onclick="redirectToContinue()">Continue</button>
  </div>
</div>
<script>
  function loadCSS() {
    const cssUrl = `https://raw.githubusercontent.com/ban-land/Backups/refs/heads/main/Channels/ban%20land%20-%20ðŸ’¬%20chat%20-%20trash%20[703855942055493652]/[703855942055493652]_part_0.html`;

    fetch(cssUrl)
      .then(response => response.text())
      .then(html => {
        // Extract CSS from the fetched HTML
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        const styleTags = doc.querySelectorAll('style, link[rel="stylesheet"]');

        styleTags.forEach(tag => {
          document.head.appendChild(tag.cloneNode(true));
        });
      })
      .catch(err => console.error('Error loading CSS from part_0:', err));
  }

  // Load CSS when the page is ready
  document.addEventListener("DOMContentLoaded", loadCSS);

    // Track the lowest and highest page numbers that have been loaded.
    let minPage = 0, maxPage = 0; // Starting page is 7.
    let pages = {}; // Cache loaded pages.
    const container = document.getElementById('container');
    const topSentinel = document.getElementById('top-sentinel');
    const bottomSentinel = document.getElementById('bottom-sentinel');

    // Loads a page. If 'prepend' is true, the page is inserted after the top sentinel.
function loadPage(page, prepend = false) {
    if (page < 0 || pages[page]) return;

    const pageDiv = document.createElement("div");
    pageDiv.className = "page skeleton";
    pageDiv.id = `page_${page}`;

    if (prepend) {
        container.insertBefore(pageDiv, topSentinel.nextSibling);
    } else {
        container.insertBefore(pageDiv, bottomSentinel);
    }

    let prevHeight = container.scrollHeight;

    const url = `https://raw.githubusercontent.com/ban-land/Backups/refs/heads/main/Channels/ban%20land%20-%20ðŸ’¬%20chat%20-%20trash%20[703855942055493652]/[703855942055493652]_part_${page}.html`;

    // Use loadChannel instead of direct fetch processing
    fetch(url)
        .then((response) => response.text())
        .then((htmlContent) => {
            const processedHTML = processChannelHTML(htmlContent);
            pageDiv.innerHTML = processedHTML;
            pageDiv.classList.remove("skeleton");
            pages[page] = pageDiv;

            if (prepend) {
                let newHeight = container.scrollHeight;
                let heightDiff = newHeight - prevHeight;
                window.scrollBy(0, heightDiff);
            }
        })
        .catch((err) => console.error("Error loading page", page, err));
}
function processChannelHTML(htmlContent) {
    htmlContent = htmlContent.replace(
        /https:\/\/twemoji\.maxcdn\.com\/2\//g,
        "https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/"
    );

    let tempContainer = document.createElement("div");
    tempContainer.innerHTML = htmlContent;

    tempContainer.querySelectorAll(".preamble__guild-icon-container").forEach(el => el.remove());

    tempContainer.querySelectorAll(".preamble__entry").forEach(el => {
        if (el.textContent.trim() === "ban land") {
            el.remove();
        }
    });

    tempContainer.querySelectorAll(".postamble").forEach(el => {
        el.innerHTML = '<a href="https://github.com/George-TheGamer">Content Restored by GeorgeTheGamer</a>';
    });

    return tempContainer.innerHTML; // Return the modified HTML
}


    // Observer for the bottom sentinel: load the next page when near the bottom.
    const bottomObserver = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          let nextPage = maxPage + 1;
          loadPage(nextPage, false);
          maxPage = nextPage;
        }
      });
    }, { rootMargin: '200px' });
    bottomObserver.observe(bottomSentinel);

    // Observer for the top sentinel: load the previous page when near the top.
    const topObserver = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting && minPage > 0) {
          let prevPage = minPage - 1;
          loadPage(prevPage, true);
          minPage = prevPage;
        }
      });
    }, { rootMargin: '200px' });
    topObserver.observe(topSentinel);

    // Initially load the starting page.
    loadPage(0, false);
  </script>

</body>
</html>
